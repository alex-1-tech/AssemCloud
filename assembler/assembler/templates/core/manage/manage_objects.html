{% extends 'base.html' %}
{% load static %}
{% block title %}Manage Machine{% endblock %}

{% block content %}

<div class="container py-4">
  <h2 class="mb-4">Manage Machine</h2>

  <input type="text" id="machine-name" class="form-control mb-3" placeholder="Machine Name" required>

  <button type="button" class="btn btn-primary mb-4" id="add-root-assembly">+ Add Assembly</button>

  <div id="assemblies-root"></div>

  <template id="assembly-template">
    <div class="border-start ps-3 mt-3 assembly">
      <div class="d-flex align-items-center gap-2 mb-2">
        <input type="text" name="assembly_name" class="form-control" placeholder="Assembly Name" required>
        <button type="button" class="btn btn-sm btn-outline-primary add-sub-assembly" title="Add Sub-Assembly">
          <i class="bi bi-boxes"></i>
        </button>
        <button type="button" class="btn btn-sm btn-outline-success add-part" title="Add Part">
          <i class="bi bi-box"></i>
        </button>
      </div>
      <div class="sub-assemblies"></div>
      <div class="parts"></div>
    </div>
  </template>

  <template id="part-template">
    <div class="border-start ps-3 mt-2 part">
      <div class="d-flex align-items-center gap-2 mb-2">
        <input type="text" name="part_name" class="form-control" placeholder="Part Name" required>
      </div>
    </div>
  </template>

  <button type="button" class="btn btn-success mt-4" onclick="submitData()">Save All</button>
</div>

{% endblock %}

{% block extra_scripts %}
<script>
  const saveUrl = "{% url 'save_all_objects' %}";
  const csrfToken = "{{ csrf_token }}";
</script>
<script src="{% static 'core/js/manage.js' %}"></script>
{% endblock %}


