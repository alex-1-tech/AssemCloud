<li class="list-group-item">
  <strong>{{ assembly.name }}</strong>

  {% if assembly.part_set.all %}
    <ul class="list-unstyled ms-3">
      {% for part in assembly.part_set.all %}
        <li>{{ part.name }}</li>
      {% endfor %}
    </ul>
  {% endif %}

  {% with sub_assemblies=assembly.sub_assemblies.all %}
    {% if sub_assemblies %}
      <ul class="list-group ms-3 mt-2">
        {% for sub_assembly in sub_assemblies %}
          {% include 'components/assembly_tree.html' with assembly=sub_assembly %}
        {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}
</li>
